<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!--<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">-->
<meta name="viewport" content="width=320, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>抢夺闹钟不赖床 天才宝贝</title>
<style>
@charset "utf-8";
blockquote,body,caption,dd,div,dl,dt,em,fieldset,form,h1,h2,h3,h4,h5,h6,html,iframe,img,label,legend,li,object,ol,p,pre,span,strong,table,tbody,td,tfoot,th,thead,tr,ul,article,section,aside,figure{border:0 none;margin:0;outline:0 none;padding:0;}
body,html{font-family:'Microsoft YaHei',Helvetica,Tahoma,StSun,SimSun,sans-serif;font-size:29px;background-color:#b3d1fe;-webkit-text-size-adjust:none;height:100%;}
ol,ul,li{list-style:none}
table{border-collapse:collapse;border-spacing:0}
:focus{outline:0}
button::-moz-focus-inner{padding:0;border:0}
a:link,a:visited{text-decoration: none;color:#9b5e16;}
a:hover{text-decoration:none;}
a{-webkit-tap-highlight-color:rgba(255,0,0,0);}
img{border:0;}
.clear{clear:both;display:block;margin:0;padding:0}
.clear-after:after{content:"";display:block;height:0;clear:both;visibility:hidden}
* .clear-after{zoom:1}
.hide{display:none}
.clearfix:after{display:block;clear:both;height:0;visibility:hidden;content:"."}
.clearfix{display:block;*display:inline-block;zoom:1;}
* html .clearfix{height:1%}
.tac{text-align:center}
.w100{width:100%;}
.imgw100{width:100%;display:block;}

/*.hbox {display:-webkit-box;display:-moz-box;display:-ms-flexbox;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;box-orient:horizontal;-ms-flex-direction:row;display:box;width:100%;}
.vbox {display:-webkit-box;display:-moz-box;display:-ms-flexbox;-webkit-box-orient:vertical;-moz-box-orient:vertical;box-orient:vertical;-ms-flex-direction:column;display:box;height:100%;}
.flex1 {-webkit-box-flex:1;-moz-box-flex:1;-ms-flex:1;box-flex:1;}
.flex2 {-webkit-box-flex:2;-moz-box-flex:2;-ms-flex:2;box-flex:2;}
.flex3 {-webkit-box-flex:3;-moz-box-flex:3;-ms-flex:3;box-flex:3;}
.flex4 {-webkit-box-flex:4;-moz-box-flex:4;-ms-flex:4;box-flex:4;}
.flex5 {-webkit-box-flex:5;-moz-box-flex:5;-ms-flex:5;box-flex:5;}*/

.wrapper{position:relative;height:100%;}
.wrapper section{width:100%;height:100%;overflow:hidden;}

.content3{height:100%;}
.content3 header{height:10%;width:100%;background:#b3d1fe;display:-webkit-box;-webkit-box-orient:horizontal;-webkit-box-pack:end;-webkit-box-align:center;
display:box;box-orient:horizontal;box-pack:end;box-align:center;position:relative;}
.content3 header em{font-style:normal; padding:0 0.5em;}
.content3 header #inter{margin-right:1em;background:rgba(255,255,255,0.6);padding:0.5em;border-radius:0.25em;font-size:1em; line-height:1;}
.content3 header #count{position:absolute;left:0.5em;top:0.6em;color:#ff0;font-size:2em;line-height:1;}
.content3 .scene{height:90%; position:relative;overflow:hidden;background:url(image/scene01.jpg) 0 0/100% 100% no-repeat;}
/*.content3 .scene:after{content:" ";display:block;height:30%;width:100%; position:absolute;left:0;top:30%;z-index:1;border-top:1em solid #069a10;border-bottom:1em solid #fd6c02;}*/
.content3 .scene .borderbox{display:block;height:30%;width:100%; position:absolute;left:0;top:30%;z-index:1;border-top:1em solid #069a10;border-bottom:1em solid #fd6c02;}
.content3 .scene .flex1{position:relative;height:100%;width:33.3%; float:left;overflow:hidden;z-index:2;}
.content3 .scene .flex1 strong{display:block;width:80%;position:absolute; left:10%;bottom:-0.3em;}
.content3 .scene .flex1 strong img{width:100%;}
.content3 .scene .flex1 i{/*position:absolute;left:50%;top:0; margin-left:-2.5em;*/display:block;margin:0 auto;width:5em;height:3.5em;background:url(image/clock.png) 0 0/100% auto no-repeat;
-webkit-transform:translateY(0);
transform:translateY(0);
-webkit-transition-property:transform;
-webkit-transition-duration:3s;
-webkit-transition-timing-function:linear;
-webkit-transition-delay:0s;
transition-property:transform;
transition-duration:3s;
transition-timing-function:linear;
transition-delay:0s;
}

@media screen and (max-width : 340px){
	body{font-size:12px;}
}
@media screen and (min-width : 341px) and (max-width : 360px){
	body{font-size:13px;}
}
@media screen and (min-width : 361px) and (max-width : 400px){
	body{font-size:14px;}
}
@media screen and (min-width : 401px) and (max-width : 440px){
	body{font-size:16px;}
}
@media screen and (min-width : 441px) and (max-width : 480px){
	body{font-size:16px;}
}
@media screen and (min-width : 481px) and (max-width : 520px){
	body{font-size:17px;}
}
@media screen and (min-width : 521px) and (max-width : 560px){
	body{font-size:21px;}
}
@media screen and (min-width : 561px) and (max-width : 620px){
	body{font-size:22px;}
}
@media screen and (min-width : 621px) and (max-width : 660px){
	body{font-size:24px;}
}
@media screen and (min-width : 661px) and (max-width : 720px){
	body{font-size:26px;}
}
@media screen and (min-width : 721px) and (max-width : 800px){
	body{font-size:29px;}
}
@media screen and (min-width : 801px) {
	body{font-size:31px;}
}
</style>
<script src="zepto.min.js" type="text/javascript"></script>

</head>

<body>
	<article class="wrapper">
        <section id="wrap3" class="content3">
        	<header><span id="count">30</span><span id="inter" onClick="playGame.again();">积分:<em id="jfNum">0</em></span></header>
            <div class="scene hbox" id="scene">
            	<div class="borderbox">
                	<p id="p1"></p>
                    <p id="p2"></p>
                </div>
            	<div class="flex1">
                	<strong><img src="image/rab1.png" /></strong><i></i>
                </div>
                <div class="flex1">
                	<strong><img src="image/rab2.png" /></strong><i></i>
                </div>
                <div class="flex1">
                	<strong><img src="image/rab3.png" /></strong><i></i>
                </div>
            </div>
        </section>
	</article>
    <script>
		
		var w_h=(document.body.offsetHeight||document.documentElement.offsetHeight);
		var em_1=parseFloat(getComputedStyle($("body")[0],0)['fontSize']);
		var right_top=w_h*0.1+w_h*0.3+em_1;
		var right_bottom=right_top+w_h*0.9*0.3-em_1*3.5;
		
		var playGame={
				"count":30,
				"score":0,
				"w_h":w_h,
				"em1":em_1,
				"jifen":$("#jfNum"),
				"scene_but":$("#scene .flex1 strong"),
				"scene_child":$("#scene .flex1"),
				"right_top":right_top,
				"right_bottom":right_bottom,
				"random_num":function(){return Math.floor(Math.random()*3);},
				"speed":3000,
				"timepoint":null,
				"play":function(){
					if(this.count==0){alert('EXCELLENT');return false;}
					var that=this;
					/*this.scene_child.eq(this.random_num()).append('<i></i>').children("i").animate({"top":'100%'},this.speed,'linear',function(){
							showPOP('FUCK YOU');
							$(this).remove();
							that.count--;
							that.speed=parseInt(that.speed-that.speed*0.05);
							});*/
					//count.text(this.count);
					console.log(this.speed);
					var ha=this.scene_child.eq(this.random_num()).children("i").attr("i",this.count);
					setTimeout(function(){
						//haha.style.cssText='top:100%;-webkit-transition:top '+(that.speed/1000+"s")+' linear 0s;transition:top '+(that.speed/1000+"s")+' linear 0s;'
						//haha.style.webkitTransition='top '+(that.speed/1000+"s")+' linear 0s';
						//haha.style.transition='top '+(that.speed/1000+"s")+' linear 0s';
						ha[0].style.transitionDuration=(that.speed/1000+"s");
						ha[0].style.webkitTransitionDuration=(that.speed/1000+"s");
						ha[0].style.webkitTransform='translateY('+(that.w_h*0.9+'px')+')';
						ha[0].style.transform='translateY('+(that.w_h*0.9+'px')+')';
						},50);
					console.log(this.speed,ha.attr("i"),that.count);
					this.timepoint=setTimeout(function(){if(ha[0].getAttribute("i")==that.count){alert('GAME OVER 2');}},that.speed);
					},
				"bindevent":function(){
					var that=this,count=$("#count");console.log(this.scene_child.children("i").offset().top);
					this.scene_but.removeAttr("notouch").on("touchstart",function(){
						if(this.getAttribute("notouch")=="true"){return false;}
						if(that.timepoint){clearTimeout(that.timepoint);console.log("clear ok");}
						var t=$(this).next('i').offset().top;
						console.log(t);
						$("#p1").text(t+","+that.right_top+","+that.right_bottom);
						$("#p2").text(($(this).next('i').attr('i')!=that.count)+","+(t<that.right_top)+","+(t>that.right_bottom));
						if($(this).next('i').attr('i')!=that.count||t<that.right_top||t>that.right_bottom){
							this.setAttribute("notouch","true");
							alert('GAME OVER 1');
							console.log("Game Over");
							}
						else{
							//$(this).prev('i').css({'top':'-4em','transitionDuration':'0s','webkitTransitionDuration':'0s'});
							var this_i=$(this).next('i')[0];
							this_i.style.transitionDuration="0s";
							this_i.style.webkitTransitionDuration="0s";
							this_i.style.webkitTransform='translateY(0)';
							this_i.style.transform='translateY(0)';
							count.text(--that.count);
							that.speed=parseInt(that.speed-that.speed*0.066);
							(that.speed>2000)?(that.score+=1):((that.speed>1000)?(that.score+=5):(that.score+=10));
							that.jifen.text(that.score);
							that.play();
							}
						});
					},
				"again":function(){
					this.speed=3000;
					this.count=30;
					this.score=0;
					this.scene_but.removeAttr("notouch");
					this.scene_child.children("i").removeAttr("style").removeAttr('i');
					this.play();
				}
			};
		console.log(playGame.w_h,playGame.right_top,playGame.right_bottom);
			
		
		playGame.bindevent();
		playGame.play();
				
</script>
</body>
</html>