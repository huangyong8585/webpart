var ALL_CITY={"list":{"1":"\u4e0a\u6d77","2":"\u5e7f\u5dde","6":"\u6c88\u9633","10":"\u6e29\u5dde","11":"\u6df1\u5733","20":"\u91cd\u5e86","21":"\u5357\u4eac","23":"\u6210\u90fd","28":"\u957f\u6625","31":"\u5f90\u5dde","33":"\u5408\u80a5","34":"\u4e2d\u5c71","39":"\u5357\u5b81","43":"\u4e49\u4e4c","48":"\u6d4e\u5b81","49":"\u6c5f\u9634","51":"\u4e1c\u8425","54":"\u7ef5\u9633","56":"\u4e34\u6c82","57":"\u70df\u53f0","74":"\u79e6\u7687\u5c9b"},"city1":{"4":"\u4e0a\u6d77\u8679\u6865#\u4e0a\u6d77\u5e02\u957f\u5b81\u533a\u5174\u4e49\u8def8\u53f7\u4e07\u90fd\u5546\u57ce3\u697cB-301\u5355\u5143","5":"\u4e0a\u6d77\u9ec4\u6d66#\u4e0a\u6d77\u5f90\u5bb6\u6c47\u8def618\u53f7\u65e5\u6708\u5149\u4e2d\u5fc3\u5e7f\u573a3\u697cC\u533a\uff0c3F-k-12","18":"\u4e0a\u6d77\u5927\u5b81#\u4e0a\u6d77\u5171\u548c\u65b0\u8def2008\u53f7\u5927\u5b81\u56fd\u9645\u5546\u4e1a\u5e7f\u573a12\u5e62416-419\u5ba4","42":"\u4e0a\u6d77\u8054\u6d0b#\u6d66\u4e1c\u82b3\u7538\u8def300\u53f7\u8054\u6d0b\u5e7f\u573aA\u533a3\u5c42306-2","1007":"\u4e0a\u6d77\u95f5\u884c#\u4e0a\u6d77\u95f5\u884c\u533a\u90fd\u5e02\u8def5001\u53f7\u4ef2\u76db\u4e16\u754c\u5546\u57ce3\u697c13A\u5355\u5143","1019":"\u4e0a\u6d77\u6768\u6d66#\u6768\u6d66\u533a\u6dde\u6caa\u8def338\u53f7\u521b\u667a\u5929\u57306\u53f7\u697c1F"},"city2":{"36":"\u5e7f\u5dde\u4e07\u535a#\u5e7f\u5dde\u5e02\u756a\u79ba\u533a\u756a\u79ba\u5927\u9053\u4e07\u535a\u4e2d\u5fc3\u65af\u9ad8\u8d2d\u7269\u5e7f\u573aB6\u4e8c\u5c42B62\u53f7","121":"\u5e7f\u5dde\u5bcc\u90a6#\u5e7f\u5dde\u5e02\u4e2d\u5c71\u4e03\u8def51\u53f7\u5bcc\u90a6\u4e2d\u5fc3\u4e09\u697c312-313\u53f7"},"city6":{"1041":"\u6c88\u9633\u957f\u767d#\u6c88\u9633\u5e02\u548c\u5e73\u533a\u957f\u767d\u897f\u8def26-5\u53f76-7\u95e8\uff08\u957f\u767d\u4e07\u79d1\u57ce\u4e1c\u95e8\u531750\u7c73\uff09"},"city10":{"1005":"\u9f99\u6e2f\u8d22\u5bcc#\u82cd\u5357\u53bf\u9f99\u6e2f\u9547\u9f99\u6e2f\u8d22\u5bcc\u5e7f\u573a\u9f99\u57ce\u534e\u5e9c\u4e09\u5e623\u5c42"},"city11":{"23":"\u6df1\u5733\u5357\u5c71#\u6df1\u5733\u5e02\u5357\u5c71\u5546\u4e1a\u6587\u5316\u4e2d\u5fc3\u533a\u6d77\u5fb7\u4e09\u9053\u7f8e\u5885\u84dd\u5c71\u5bb6\u56ed\u88d9\u697c1-2\u5c42","96":"\u6df1\u5733\u798f\u7530#\u6df1\u5733\u5e02\u798f\u7530\u533a\u798f\u534e\u4e00\u8def3\u53f7\u4e00\u697c"},"city20":{"34":"\u91cd\u5e86\u5730\u738b#\u91cd\u5e86\u5e02\u6e1d\u4e2d\u533a\u6c11\u65cf\u8def166\u53f7\u5730\u738b\u8d2d\u7269\u4e2d\u5fc3\u738b\u5e9c\u4e95\u767e\u8d276\u697cK\u533a","49":"\u91cd\u5e86\u9f99\u6e56#\u91cd\u5e86\u5e02\u6e1d\u5317\u533a\u9f99\u6e56\u7d2b\u57ce\u5929\u8857\u8d2d\u7269\u4e2d\u5fc32-8\u680b301-307"},"city21":{"38":"\u5357\u4eac\u6c34\u6e38\u57ce#\u5357\u4eac\u5e02\u767d\u4e0b\u533a\u5065\u5eb7\u8def1\u53f7\u6c34\u6e38\u57ce\u4e09\u697c331","1042":"\u5357\u4eac\u9f99\u6c5f#\u5357\u4eac\u5e02\u9f13\u697c\u533a\u8349\u573a\u95e8\u5927\u885799\u53f7\u9f99\u6c5f\u65b0\u57ce\u5e02\u5e7f\u573a\u4e09\u697c"},"city23":{"37":"\u6210\u90fd\u9526\u6c5f#\u6210\u90fd\u5e02\u9526\u6c5f\u533a\u4e1c\u5927\u8def238\u53f7\u5e02\u5987\u5973\u513f\u7ae5\u4e2d\u5fc3\u4e09\u697c","95":"\u6210\u90fd\u9752\u7f8a#\u6210\u90fd\u5e02\u9752\u7f8a\u5927\u905399\u53f7\u535a\u745e\u4f18\u54c1\u9053\u5e7f\u573a3\u697c 301B"},"city28":{"47":"\u957f\u6625\u671d\u9633#\u957f\u6625\u5e02\u7ecf\u6d4e\u5f00\u53d1\u533a\u6606\u5c71\u8def1351\u53f7"},"city31":{"52":"\u5f90\u5dde\u9f13\u697c#\u5f90\u5dde\u5e02\u9f13\u697c\u533a\u6c11\u4e3b\u5317\u8def61\u53f74\u697c"},"city33":{"88":"\u5408\u80a5\u6b22\u4e50\u9882#\u5408\u80a5\u5e02\u5e90\u9633\u533a\u957f\u4e30\u8def66\u53f7\uff08\u4e0e\u5317\u4e00\u73af\u4ea4\u53c9\u53e3\uff09\u6b22\u4e50\u9882\u8d2d\u7269\u4e2d\u5fc3","1028":"\u5408\u80a5\u5929\u9e45\u6e56#\u5408\u80a5\u653f\u52a1\u533a\u7941\u6f5c\u8def\u53e3\u65b0\u5730\u8d2d\u7269\u4e2d\u5fc3\u767e\u76db\u4e8c\u697c\u5973\u88c5\u533a"},"city34":{"91":"\u4e2d\u5c71\u76ca\u534e#\u4e2d\u5c71\u5e02\u4e2d\u5c71\u4e09\u8def\u6021\u534e\u5927\u53a6\u4e1c\u5ea7626-605\u5355\u5143"},"city39":{"97":"\u5357\u5b81\u822a\u6d0b#\u5357\u5b81\u5e02\u6c11\u65cf\u5927\u9053131\u53f7\u822a\u6d0b\u57ce\u5317\u5e7f\u573aA3\u680b"},"city43":{"103":"\u4e49\u4e4c\u7a20\u57ce#\u6d59\u6c5f\u7701\u4e49\u4e4c\u5e02\u8d1d\u6751\u8def335~348"},"city48":{"108":"\u6d4e\u5b81\u8fd0\u6cb3\u57ce#\u6d4e\u5b81\u5e02\u592a\u767d\u4e2d\u8def17\u53f7\u8fd0\u6cb3\u57ce\u5546\u4e1a\u6469\u5c14\u4e8c\u5c42"},"city49":{"112":"\u6c5f\u9634\u6625\u7533#\u6c5f\u9634\u5e02\u6f84\u6c5f\u4e2d\u8def99\u53f7\u9b54\u65b9\u65f6\u4ee3\u5e7f\u573a2\u697c"},"city51":{"113":"\u4e1c\u8425\u4e1c\u57ce#\u4e1c\u8425\u5e02\u4e1c\u57ce\u4e1c\u4e09\u8def79\u53f7\u6c11\u5efa\u65f6\u5c1a\u5e7f\u573a2\u697c"},"city54":{"116":"\u7ef5\u9633\u5357\u6cb3#\u7ef5\u9633\u5e02\u6daa\u57ce\u533a\u5357\u6cb3\u8def\u964430\u53f7\u57ce\u5357\u540d\u84573\u697c"},"city56":{"119":"\u4e34\u6c82\u5170\u5c71#\u4e34\u6c82\u5e02\u5170\u5c71\u533a\u89e3\u653e\u8def128\u53f7\u4e45\u9686\u5965\u65af\u5361\u5546\u4e1a\u5e7f\u573aC\u99862\u697c"},"city57":{"118":"\u70df\u53f0\u829d\u7f58#\u70df\u53f0\u5e02\u829d\u7f58\u533a\u5357\u5927\u8857180\u53f7\u632f\u534e\u56fd\u9645\u5e7f\u573a3\u697c"},"city74":{"1043":"\u79e6\u7687\u5c9b\u6d77\u6e2f#\u6cb3\u5317\u7701\u79e6\u7687\u5c9b\u5b9c\u5b89\u5927\u53a6\u4e09\u5c42"}
};

//添加城市选项
function addcitylist(){
	var htm="";
	$.each(ALL_CITY.list,function(key,value){
		htm+="<option value='" + key + "'>" + value + "</option>";
	});
	$("#select_city").html(htm).change(function(){addCityDetailList(this.value);});
	addCityDetailList(1);
	}
	
//添加城市报名点选项
function addCityDetailList(n){
	var tmp_i = 0,html="",dataArray,da,db;
	$.each(ALL_CITY["city"+n], function (key, value) {
		dataArray = value.split('#'),da = dataArray[0],db = dataArray[1];
		html+="<option value='" + key + "'  data-addr='" + db + "'>" + da + "</option>"
		tmp_i++;
	});
	if (tmp_i == 0) {
		$("#select_center").append("<option value='-1'>无</option>");
	}
	else{
		$("#select_center").html(html);
		}
	}
	
//获取接口json数据
function loadData(_url,data,fn){
	var url = _url+"?"+data+"&callback="+fn;console.log(url);
	var t=document.createElement("script");
	t.src=url,t.type="text/javascript",t.charset='utf-8',t.async=!0
	document.getElementsByTagName("head")[0].appendChild(t);
	t.onload=function(){document.getElementsByTagName("head")[0].removeChild(t);}
	}

//表单验证
function checkform(){
	var reg = /^1([0-9][0-9])\d{8}$/g,
		phone=$("#phone")[0],
		phone_val=phone.value,
		city=$("#select_city option").not(function(){return !this.selected}).text(),
		center=$("#select_center option").not(function(){return !this.selected}).text(),
		system=(window.location.href.indexOf("IOS")>-1?'ios':'android');
		console.log(isNaN(phone_val),phone_val.length);
	if(isNaN(phone_val)){showAlertBox("手机号码必须为数字，请正确填写！");phone.focus();}
	else if(phone_val.length == 0) {showAlertBox("手机号码不能为空，请填写！");phone.focus();}
	else if(phone_val.length < 11) {showAlertBox("手机号码不足11位，请正确填写！");phone.focus();}
	else if(!reg.test(phone_val)){showAlertBox("手机号码有误，请正确填写！");phone.focus();}
	else{
		//loadData(_url,data,fn)
		//console.log('http://shqqlx.duapp.com/grab_clock.php?phone=13800138000&city=&center=&score=350&system=ios')
		//console.log(phone_val,city,center,playGame.score,system)
		loadData('http://shqqlx.duapp.com/grab_clock.php','phone='+phone_val+'&city='+city+'&center='+center+'&score='+playGame.score+'&system='+system,'pagehandle');
		}
	}
//提交手机号的回调函数
function pagehandle(data){
	if(data.code==0){
		showAlertBox(data.msg);
		}
	else if(data.code==1){
		showAlertBox.success=true;
		showAlertBox(data.msg);
		}
	}