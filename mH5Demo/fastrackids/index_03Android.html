<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!--<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">-->
<meta name="viewport" content="width=320, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>抢夺闹钟不赖床 天才宝贝</title>
<script>
if(window.location.search.indexOf("from=timeline")>-1||window.location.search.indexOf("from=singlemessage")>-1){window.location.href='index_01.html';}
var o=navigator.userAgent;
if(o.indexOf("iPhone")!=-1||o.indexOf("iPad")!=-1||o.indexOf("iPod")!=-1){
	//phoneSystem = "iOS";
	//window.location.href=
	}
else if(o.indexOf("Android")!=-1){
	//phoneSystem = 'Android';
	//window.location.href="indexAndroid.html";
	}
else {
	//phoneSystem = 'Android';
	}
</script>
<style>
@charset "utf-8";
blockquote,body,caption,dd,div,dl,dt,em,fieldset,form,h1,h2,h3,h4,h5,h6,html,iframe,img,label,legend,li,object,ol,p,pre,span,strong,table,tbody,td,tfoot,th,thead,tr,ul,article,section,aside,figure{border:0 none;margin:0;outline:0 none;padding:0;}
body,html{font-family:'Microsoft YaHei',Helvetica,Tahoma,StSun,SimSun,sans-serif;font-size:29px;background-color:#b3d1fe;-webkit-text-size-adjust:none;height:100%;}
ol,ul,li{list-style:none}
table{border-collapse:collapse;border-spacing:0}
:focus{outline:0}
button::-moz-focus-inner{padding:0;border:0}
a:link,a:visited{text-decoration: none;color:#9b5e16;}
a:hover{text-decoration:none;}
a{-webkit-tap-highlight-color:rgba(255,0,0,0);}
img{border:0;}
.clear{clear:both;display:block;margin:0;padding:0}
.clear-after:after{content:"";display:block;height:0;clear:both;visibility:hidden}
* .clear-after{zoom:1}
.hide{display:none}
.clearfix:after{display:block;clear:both;height:0;visibility:hidden;content:"."}
.clearfix{display:block;*display:inline-block;zoom:1;}
* html .clearfix{height:1%}
.tac{text-align:center}
.w100{width:100%;}
.imgw100{width:100%;display:block;}

.hbox {display:-webkit-box;display:-moz-box;display:-ms-flexbox;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;box-orient:horizontal;-ms-flex-direction:row;display:box;width:100%;}
.vbox {display:-webkit-box;display:-moz-box;display:-ms-flexbox;-webkit-box-orient:vertical;-moz-box-orient:vertical;box-orient:vertical;-ms-flex-direction:column;display:box;height:100%;}
.flex1 {-webkit-box-flex:1;-moz-box-flex:1;-ms-flex:1;box-flex:1;}
.flex2 {-webkit-box-flex:2;-moz-box-flex:2;-ms-flex:2;box-flex:2;}
.flex3 {-webkit-box-flex:3;-moz-box-flex:3;-ms-flex:3;box-flex:3;}
.flex4 {-webkit-box-flex:4;-moz-box-flex:4;-ms-flex:4;box-flex:4;}
.flex5 {-webkit-box-flex:5;-moz-box-flex:5;-ms-flex:5;box-flex:5;}

.wrapper{position:relative;height:100%;max-width:640px; margin:0 auto;}
.wrapper section{position:absolute;left:0;top:0;width:100%;height:100%;display:none;opacity:0;overflow:hidden;}

.content3{height:100%;}
.content3 header{height:10%;width:100%;background:#b3d1fe;display:-webkit-box;-webkit-box-orient:horizontal;-webkit-box-pack:end;-webkit-box-align:center;
display:box;box-orient:horizontal;box-pack:end;box-align:center;position:relative;}
.content3 header em{font-style:normal; padding:0 0.5em;}
.content3 header #inter{margin-right:1em;background:rgba(255,255,255,0.6);padding:0.5em;border-radius:0.25em;font-size:1em; line-height:1;}
.content3 header #count{position:absolute;left:0.5em;top:0.6em;color:#ff0;font-size:2em;line-height:1;}
.content3 .scene{height:90%; position:relative;overflow:hidden;background:url(image/scene01.jpg) 0 0/100% 100% no-repeat;}
.content3 .scene .borderbox{display:block;height:30%;width:100%; position:absolute;left:0;top:30%;z-index:1;border-top:1em solid #069a10;border-bottom:1em solid #fd6c02;}
.content3 .scene .flex1{position:relative;height:100%;overflow:hidden;z-index:2;}
.content3 .scene .flex1 strong{display:block;width:80%;position:absolute; left:10%;bottom:-0.3em;background:url(image/rabs.png) 0 center/100% 300% no-repeat;}
.content3 .scene .flex1 strong.rab1{background-position:0 top;}
.content3 .scene .flex1 strong.rab2{background-position:0 center;}
.content3 .scene .flex1 strong.rab3{background-position:0 bottom;}
.content3 .scene .flex1 strong img{width:100%;}
.content3 .scene .flex1 i{/*position:absolute;left:50%;top:0; margin-left:-2.5em;*/ visibility:hidden;display:block;margin:0 auto;width:5em;height:3.5em;background:url(image/clock.png) 0 0/100% auto no-repeat;
-webkit-transform:translateY(0);
transform:translateY(0);
-webkit-transition-property:transform;
-webkit-transition-duration:0s;
-webkit-transition-timing-function:linear;
-webkit-transition-delay:0s;
transition-property:transform;
transition-duration:0s;
transition-timing-function:linear;
transition-delay:0s;
}
#wrap3 .scene .reset i{visibility:hidden;-webkit-transition-duration:0s;transition-duration:0s;-webkit-transform:translateY(-100%);transform:translateY(-100%);}
/*弹出层*/
.popbox{position:fixed;width:100%;height:100%;left:0;top:0;background-color:rgba(0,0,0,0.6);z-index:10;-webkit-transform:translateY(-150%);-moz-transform:translateY(-150%);transform:translateY(-150%);
-webkit-transition:transform .2s ease-in-out;-moz-transition:transform .2s ease-in-out;transition:transform .2s ease-in-out;}
.pop{display:none;position:absolute;width:90%;left:5%;top:50%;background-color:#b3d1fe;border-radius:0.5em; padding-bottom:2%;}
/*.pop .closepop{position:absolute;right:0;top:0;padding:4%; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfAgMAAABiwP6qAAAACVBMVEUAAAAVCgIkGRJnPJyuAAAAAXRSTlMAQObYZgAAAFpJREFUGNNFkEEOACEIAyHhsEeexNP26WLTjGooChRqTGhVtHChhBvIC7KjFEVtvuv8DqcLXNo6qjB97jZr2em2UyMwCy/kUAUPzPSiO/P4Nsz8VKALpWjnNw4evAWS9iAWqwAAAABJRU5ErkJggg==) center center no-repeat; background-size:70% 70%;}
.pop .closepop img{height:1.4em;display:block;opacity:0;}*/
.pop h3{font-size:2em; text-align:center;color:#f00;text-shadow:0 0 5px rgba(255,90,0,0.6);padding:4% 0;line-height:1;font-weight:normal;}
.pop p a{font-size:1em;line-height:2em;height:2.2em;text-align:center;background:-webkit-gradient(linear,0 0,0 70%,from(#78d3f4),to(#00a0e9));border:0.2em solid #00a0e9;border-radius:0.4em;box-sizing:border-box;color:#fff;}
.pop p.bbut{padding:4% 3% 2%;text-align:center;}
.pop p.bbut a{display:inline-block;width:90%;height:2.3em;}
.pop p.sbut{padding:2% 3% 4%;}
.pop p.sbut a{display:inline-block;width:40%;margin:0 5%;}
.pop .tel_box,.pop .city_center{padding:1% 8%;}
.pop .tel_box span,.pop .city_center span{display:block;font-size:1em;color:#666;margin-bottom:2%;}
.pop .tel_box input{width:94%;height:2em;line-height:2em;font-size:1em;font-weight:bold;letter-spacing:1px;border-radius:0.4em;border:1px solid #c0c0c0;padding:0 3%;}
.pop .city_center select{display:inline-block;width:45%;height:2em;font-size:1em;border-radius:0.4em;border:1px solid #fff;box-sizing:border-box;}
.pop .city_center select#select_city{margin-right:10%;}
.alertpop{display:none;position:fixed;width:100%;height:100%;left:0;top:0;background-color:rgba(0,0,0,0.5);z-index:100;}
.alertpop .alertbox{position:absolute;width:60%;left:20%;top:50%; background:#fff;border-radius:0.5em;overflow:hidden;}
.alertpop .alertbox p{padding:8% 6%;font-size:1em; word-break:break-all;}
.alertpop .alertbox .but{border-top:1px solid #b3d1fe;}
.alertpop .alertbox .but a{display:inline-block;width:50%;height:2.5em;line-height:2.5em;text-align:center;box-sizing:border-box;color:#333;}
.alertpop .alertbox .but a:first-child{border-right:1px solid #b3d1fe;}
.alertpop .alertbox .but a:active{ background:#ccc;}

/*动画*/
.wrapper .animated{opacity:1;animation: opacityto1 0.8s linear;-moz-animation:opacityto1 0.8s linear;-webkit-animation:opacityto1 0.8s linear;}


aside.loading{ position:absolute;left:0;top:0;height:100%;width:100%;display:-webkit-box;display:box; -webkit-box-pack:center;box-pack:center;-webkit-box-align:center;box-align:center;display:none;}
aside.loading .load{width:50%;height:40px;line-height:40px;display:inline-block;color:#f00;font-size:28px;font-family:Arial;text-align:center;}

/*分享*/
.sharetip{position:fixed;width:100%;height:100%;left:0;top:150%;background-color:rgba(0,0,0,0.6);z-index:90;-webkit-transform:translateY(350%);-moz-transform:translateY(350%);transform:translateY(350%);
-webkit-transition:all .5s ease-in-out;-moz-transition:all .5s ease-in-out;transition:all .5s ease-in-out; text-align:right;}
.sharetip img{width:43.59375%; margin-right:3%;}


/*自定义动画*/
@-webkit-keyframes opacityto1{0%{opacity:0;} 50%{opacity:0.2;} 100%{opacity:1;}}
@-moz-keyframes opacityto1 {0%{opacity:0;} 50%{opacity:0.2;} 100%{opacity:1;}}
@keyframes opacityto1 {0%{opacity:0;} 50%{opacity:0.2;} 100%{opacity:1;}}

@media screen and (max-width:320px) and (max-height:480px) {
	.content3 header #count{top:0.5em;}
}
@media screen and (max-width:320px) and (max-height:420px) {
	.content3 header #count{top:0.4em;}
}

@media screen and (max-width : 340px){
	body{font-size:12px;}
}
@media screen and (min-width : 341px) and (max-width : 360px){
	body{font-size:13px;}
}
@media screen and (min-width : 361px) and (max-width : 400px){
	body{font-size:14px;}
}
@media screen and (min-width : 401px) and (max-width : 440px){
	body{font-size:16px;}
}
@media screen and (min-width : 441px) and (max-width : 480px){
	body{font-size:16px;}
}
@media screen and (min-width : 481px) and (max-width : 520px){
	body{font-size:17px;}
}
@media screen and (min-width : 521px) and (max-width : 560px){
	body{font-size:21px;}
}
@media screen and (min-width : 561px) and (max-width : 620px){
	body{font-size:22px;}
}
@media screen and (min-width : 621px) and (max-width : 660px){
	body{font-size:24px;}
}
@media screen and (min-width : 661px) and (max-width : 720px){
	body{font-size:26px;}
}
@media screen and (min-width : 721px) and (max-width : 800px){
	body{font-size:29px;}
}
@media screen and (min-width : 801px) {
	body{font-size:31px;}
}
</style>
<script src="zepto.min.js" type="text/javascript"></script>

</head>

<body>
	<header style="display:none;">
    	<img src="image/share.jpg">
    </header>
	<article class="wrapper">
        <section id="wrap3" class="content3">
        	<header><span id="count">30</span><span id="inter">积分:<em id="jfNum">0</em></span></header>
            <div class="scene hbox" id="scene">
            	<div class="borderbox"></div>
            	<div class="flex1">
                	<strong class="rab2"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJkAAABzAQMAAACxTTIdAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAABlJREFUSMftwTEBAAAAwiD7pzbFPmAAAJQOCW8AAfmc7jYAAAAASUVORK5CYII=" /></strong><i></i>
                </div>
                <div class="flex1">
                	<strong class="rab2"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJkAAABzAQMAAACxTTIdAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAABlJREFUSMftwTEBAAAAwiD7pzbFPmAAAJQOCW8AAfmc7jYAAAAASUVORK5CYII=" /></strong><i></i>
                </div>
                <div class="flex1">
                	<strong class="rab2"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJkAAABzAQMAAACxTTIdAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAABlJREFUSMftwTEBAAAAwiD7pzbFPmAAAJQOCW8AAfmc7jYAAAAASUVORK5CYII=" /></strong><i></i>
                </div>
            </div>
        </section>
        <!--弹出层-->
        <div class="popbox">
            <div class="pop" id="isOver">
                <h3>GAME OVER</h3>
                <div class="tel_box">
                    <span>请输入您的手机号</span>
                    <input id="phone" type="tel" maxlength="11">
                </div>
                <div class="city_center">
            		<span>请选择离您最近的中心进行兑换</span>
                    <select id="select_city"></select><select id="select_center"></select>
                </div>
                <p class="bbut"><a href="javascript:checkform();">提 交</a></p>
                <p class="sbut"><a href="javascript:showShareImg();">去分享</a><a href="javascript:playGame.again();">再来一次</a></p>
            </div>
        </div>
        <!--弹出层-->
        <!--alert层-->
        <div class="alertpop" id="alertbox">
        	<div class="alertbox">
            	<p></p>
                <div class="but">
                	<a href="javascript:showAlertBox();">确定</a><a href="javascript:showAlertBox();">取消</a>
                </div>
            </div>
        </div>
        <!--alert层-->
        <!--分享指引-->
        <div class="sharetip" id="sharetip"><img src="image/sharetip.png" /></div>
        <!--分享指引-->
	</article>
    <script>
		var ALL_CITY=false;
		var w_h=(document.body.offsetHeight||document.documentElement.offsetHeight);
		var em_1=parseFloat(getComputedStyle($("#scene .borderbox")[0],0)['borderTopWidth']);
		var right_top=w_h*0.1+w_h*0.9*0.3+em_1;
		var right_bottom=right_top+w_h*0.9*0.3-em_1*2.5;
		
		/*var _dv=document.createElement("div");
		_dv.style.width="100%";
		_dv.style.position="absolute";
		_dv.style.left="0";
		_dv.style.top=right_top+"px";
		_dv.style.height=(right_bottom-right_top)+"px";
		_dv.style.background="rgba(255,0,0,0.5)";
		_dv.innerHTML=em_1+","+w_h;
		document.getElementById("wrap3").appendChild(_dv);*/	
		
		var playGame={
				"count":30,
				"score":0,
				"w_h":w_h,
				"em1":em_1,
				"jifen":$("#jfNum"),
				"scene_but":$("#scene .flex1 strong"),
				"scene_child":$("#scene .flex1"),
				"right_top":right_top,
				"right_bottom":right_bottom,
				"random_num":function(){return Math.floor(Math.random()*3);},
				"speed":3000,
				"timepoint":null,
				"play":function(){
					if(this.count==0){showPOP('VERY GOOD');return false;}
					var that=this;
					var ha=this.scene_child.removeClass("reset").eq(this.random_num()).children("i").attr("i",this.count);
					//ha.prev().attr('class','rab2');
					console.log(this.speed);
					setTimeout(function(){
						ha[0].style.visibility="visible";
						ha[0].style.transitionDuration=(that.speed/1000+"s");
						ha[0].style.webkitTransitionDuration=(that.speed/1000+"s");
						ha[0].style.webkitTransform='translateY('+(that.w_h*0.9+'px')+')';
						ha[0].style.transform='translateY('+(that.w_h*0.9+'px')+')';
						},100);
					this.timepoint=setTimeout(function(){
						if(ha[0].getAttribute("i")==that.count){
							ha.prev().attr('class','rab3');
							showPOP('GAME OVER');
							//that.scene_child.addClass("reset").children("i").removeAttr("style").removeAttr('i');
							}
						},that.speed);
					},
				"bindevent":function(){
					var that=this,count=$("#count");
					this.scene_but.removeAttr("notouch").on("touchstart",function(){
						if(this.getAttribute("notouch")=="true"){return false;}
						if(that.timepoint){clearTimeout(that.timepoint);console.log("clear ok");}
						var t=$(this).next('i').offset().top;
						if($(this).next('i').attr('i')!=that.count||t<that.right_top||t>that.right_bottom){
							this.setAttribute("notouch","true");
							this.className="rab3";
							showPOP('GAME OVER');
							//that.scene_child.addClass("reset").children("i").removeAttr("style").removeAttr('i');
							console.log("Game Over");
							}
						else{
							//$(this).prev('i').css({'top':'-4em','transitionDuration':'0s','webkitTransitionDuration':'0s'});
							this.className="rab1";
							var this_i=$(this).next('i')[0];
							this_i.style.visibility="hidden";
							this_i.style.transitionDuration="0s";
							this_i.style.webkitTransitionDuration="0s";
							this_i.style.webkitTransform='translateY(0)';
							this_i.style.transform='translateY(0)';
							count.text(--that.count);
							that.speed=parseInt(that.speed-that.speed*0.033);
							//(that.speed>2000)?(that.score+=1):((that.speed>1000)?(that.score+=5):(that.score+=10));
							//(that.count>=20)?(that.score+=5):((that.count>=10)?(that.score+=10):(that.score+=15));
							that.score+=10;
							that.jifen.text(that.score);
							setTimeout(function(){that.play();},100);
							}
						});
					},
				"again":function(){
					var that=this;
					showPOP(false);
					this.speed=3000;
					this.count=30;
					this.score=0;
					this.scene_but.removeAttr("notouch").attr("class","rab2");
					this.scene_child.addClass("reset").children("i").removeAttr("style").removeAttr('i');
					setTimeout(function(){that.play();},100);
				}
			};
		
		//打开分享指引
		function showShareImg(){
			var box=document.getElementById("sharetip");
			box.style.top=0;
			box.style.webkitTransform='translateY(0)';
			box.style.transform='translateY(0)';
			box.onclick=function(){
				box.style.top="150%";
				box.style.webkitTransform='translateY(350%)';
				box.style.transform='translateY(350%)';
				}
			}
			
		//打开弹出层	
		function showPOP(t){
			var box=document.getElementById("isOver");
			if(t){
				box.children[0].innerHTML=t;
				box.style.display="block";
				box.style.marginTop=(0-box.offsetHeight/2)+"px";
				box.parentNode.style.webkitTransform='translateY(0)';
				box.parentNode.style.transform='translateY(0)';
				if(!ALL_CITY){loadScript('city.js');}
				}
			else{
				box.parentNode.style.webkitTransform='translateY(-150%)';
				box.parentNode.style.transform='translateY(-150%)';
				setTimeout(function(){box.style.display="none";},300);
				}
			}
		//打开出alert层	
		function showAlertBox(t){
			var box=document.getElementById("alertbox");
			if(t){
				box.children[0].children[0].innerHTML=t;
				box.style.display="block";
				box.children[0].style.marginTop=(0-box.children[0].offsetHeight/2)+"px";
				}
			else{
				box.style.display="none";
				if(showAlertBox.success){
					showPOP(false);
					setTimeout(function(){showShareImg();},300);
					}
				}
			}
		
		function showPage(num){
			var wrap=$("#wrap"+num);
			wrap.siblings("section").hide().removeClass("animated");
			wrap.show();
			setTimeout(function(){wrap.addClass("animated");},10);
			setTimeout(function(){
				playGame.bindevent();
				playGame.play();
				},300);
			}
		showPage(3);
		
		function loadScript(url){
			if(ALL_CITY){return false;}
			else{var t=document.createElement("script");
				t.src=url,t.type="text/javascript",t.async=!0;
				document.getElementsByTagName("head")[0].appendChild(t);
				t.onload=function(){addcitylist();}
				}
			}
</script>
</body>
</html>