<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Pretty Scroll</title>
<link rel="stylesheet" type="text/css" href="../css/reset.css" />
<style>

.giftlist{width:886px;height:201px;background:#dbbdff;border:1px solid #b374ff;margin:0 auto;border-radius: 10px;}
.Screen{padding:24px 24px 11px;width:838px;height:166px;margin:0 auto;overflow:hidden;}
.screenshotsBox{width:838px;height:156px;overflow:hidden;}
.screenshotsBox ul{width:1300px;height:180px;}
.screenshotsBox ul li{width:130px;height:180px;float:left;padding-right:10px;}
.screenshotsBox ul li .gift{ width:130px;height:130px;background:#b374ff;border-radius: 5px;}
.screenshotsBox ul li .gift .gift-pic{width:130px;height:130px;background-repeat:no-repeat;background-position:50% 50%;}
#inside{width:838px;height:200px;overflow:auto;}
.likeScroll{background:url(image/likescroll_bg.png) left top no-repeat;height:10px;position:relative;}
#Scroll{ background:url(image/scroll_bg.png) left top no-repeat;height:10px;padding-left:5px;position:absolute;left:0;top:0;}
#Scroll span{ display:block;height:10px;background:url(image/scroll_bg.png) right top no-repeat;padding-right:5px;margin-right:-5px;}

</style>
<script type="text/javascript" src="../js/jquery-1.7.2.min.js"></script>
</head>

<body>
	<div class="giftlist">
  		<div class="Screen">
          <div class="screenshotsBox" id="screenshotsBox">
              <div id="inside">
                  <ul>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-1.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-2.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-3.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-4.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-5.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-6.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-1.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-2.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-3.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-4.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-5.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-6.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-1.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-2.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-3.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-4.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-5.png);"></div></div></li>
                      <li><div class="gift"><div class="gift-pic" style="background-image:url(image/pro-6.png);"></div></div></li>                                  
                  </ul>
              </div>
          </div>
          <div class="likeScroll"><div id="Scroll"><span></span></div></div>
      </div>
  </div>
            	
<script>
function likeScroll(){
	var image=$("#screenshotsBox li");
	$("#screenshotsBox ul").width(140*image.length);
	var image_w=$("#screenshotsBox ul").width();
	var box_w=$("#screenshotsBox").width();
	var inside = $("#inside")[0];
	var local = $("#Scroll span")[0];
	var local_p=local.parentNode;
	var local_s=local_p.parentNode;
	if(image_w<box_w||image_w==840){$("#Scroll").width(828);return false;}
	else{$("#Scroll").width(box_w/image_w*box_w);}
	var local_w=$("#Scroll").width();
	
		function jisuan() { var num = Math.ceil(inside.scrollLeft * (box_w-local_w-10) / (image_w - box_w));
		/*num-10<0?num=0:num=num-10;*/
		return num }
		function otherjisuan() { var num1 = Math.ceil((parseInt(local_p.style.left)) * (image_w - box_w) / (box_w-local_w-10));return num1 }
		function moveDIV() {	//拖动的函数		
            local.onmousedown = function (ev) {
				var oEvent = ev||event; 
				var x = oEvent.clientX - local_p.offsetLeft;
				document.onmousemove = function (ev) {
					var oEvent = ev||event; 
					xy = oEvent.clientX - x; 
					if (xy>box_w-local_w-10) { xy = box_w-local_w-10;}
					if (xy < 0) { xy = 0; } 
					local_p.style.left = xy + "px";
					inside.scrollLeft = otherjisuan();
				}
				document.onmouseup = function () { document.onmousemove =null;document.onmouseup =null;}
				return false;
            }
            
        }
        moveDIV();
		/*
		inside.onmouseover=function(){
			//document.body.style.overflowY="hidden";
			//document.body.style.paddingRight="16px";
			}
		inside.onmouseout=function(){
			//document.body.style.overflowY="auto";
			//document.body.style.paddingRight="0";
			}
		*/

		if(jQuery.browser.mozilla){  
			inside.addEventListener('DOMMouseScroll',function(e){  
				inside.scrollTop += e.detail>0?60:-60;  
				e.preventDefault();  
			},false);  
		}else{
			inside.onmousewheel = function(e){
				e = e || window.event;  
				inside.scrollTop += e.wheelDelta>0?-60:60;
				e.returnValue=false;
				//ie9以上屏蔽事件冒泡
				e.preventDefault();
			}; 
		}

		var scrollFunc=function(e){
		e=e || window.event;
		if(e.wheelDelta<0||e.detail>0){
			inside.scrollLeft +=50;
		}
		else if(e.wheelDelta>0||e.detail<0){
			
			inside.scrollLeft -=50;
		}
		else{return}
		local_p.style.left = jisuan() + "px";
		}
		var mousewheelevt=(/Firefox/i.test(navigator.userAgent))?"DOMMouseScroll": "mousewheel"//FF doesn't recognize mousewheel as of FF3.x
		if(document.attachEvent){inside.attachEvent("on"+mousewheelevt, scrollFunc)}//if IE (and Opera depending on user setting)
		else if(document.addEventListener){inside.addEventListener(mousewheelevt, scrollFunc, false)}//WC3 browsers
	}
likeScroll();
</script>
</body>
</html>
